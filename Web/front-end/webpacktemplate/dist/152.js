"use strict";(self.webpackChunkwebpacktemplate=self.webpackChunkwebpacktemplate||[]).push([[152],{932:(t,e,n)=>{n.d(e,{k:()=>a,u:()=>i});class s{constructor(){this._callbacks=[]}_emit(t){this._callbacks.forEach((e=>e(t)))}subscribe(t){this._callbacks.push(t)}}class o extends s{constructor(){super(),this.user={login:void 0,password:void 0,email:void 0}}setUser(t,e,n){this.user={login:t,password:e,email:n}}authQuery(){return new Promise((t=>{let e;fetch("api/users/auth",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(this.user)}).then((t=>(e=t.status,t.json()))).then((n=>{t({status:e,data:n})}))}))}registerQuery(){return new Promise((t=>{let e;fetch("api/users/register",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(this.user)}).then((t=>(e=t.status,t.json()))).then((n=>{t({status:e,data:n})}))}))}}class a{static _user=null;static _createInstance(){return new o}static createInstance(){return null===a._user&&(a._user=a._createInstance()),a._user}}class r extends s{constructor(){super(),this.product={name:void 0,price:void 0,description:void 0}}setProduct(t,e,n){this.product={name:t,price:e,description:n}}getList(){return new Promise((t=>{let e;fetch("api/product/list",{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8","User-token":localStorage.getItem("AutoSellUserToken")}}).then((t=>(e=t.status,t.json()))).then((n=>{t({status:e,data:n})}))}))}delete(t){return new Promise((e=>{let n;fetch("api/product/delete",{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8","User-token":localStorage.getItem("AutoSellUserToken"),"Delete-row":parseInt(t)}}).then((t=>(n=t.status,t.json()))).then((t=>{e({status:n,data:t})}))}))}add(){return new Promise((t=>{let e;fetch("api/product/add",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8","User-token":localStorage.getItem("AutoSellUserToken")},body:JSON.stringify(this.product)}).then((t=>(e=t.status,t.json()))).then((n=>{t({status:e,data:n})}))}))}}class i{static _product=null;static _createInstance(){return new r}static createInstance(){return null===i._product&&(i._product=i._createInstance()),i._product}}},534:()=>{class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this._render()}disconnectedCallback(){}static get observedAttributes(){return[]}attributeChangedCallback(t,e,n){}_render(){this.ownerDocument.defaultView&&(this.shadowRoot.innerHTML=" \n  <div>       \n   <button>\n    <slot></slot>  \n   </button>\n  </div>              \n")}}customElements.define("x-button",t)},362:()=>{class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.addEventListener("change",(t=>{t.stopPropagation(),this._xValue=t.target.value}))}connectedCallback(){this._render()}disconnectedCallback(){}static get observedAttributes(){}attributeChangedCallback(t,e,n){}set xValue(t){this._xValue=t,this._render()}get xValue(){return this._xValue}_render(){this.ownerDocument.defaultView&&(this.shadowRoot.innerHTML="  \n  <div>                \n   <input type='text'> \n   </input>\n  </div>             \n")}}customElements.define("x-input",t)},152:(t,e,n)=>{n.r(e),n(534),n(362);var s=n(932),o=n(659);class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this._render()}disconnectedCallback(){}static get observedAttributes(){return[]}attributeChangedCallback(t,e,n){}async _btn_delete_listener(t){let e=t;console.log(e);let n=s.u.createInstance(),a=await n.delete(e);200==a.status?this._render():401==a.status?(localStorage.removeItem("AutoSellUserToken"),o.RouterFactory.createInstance().go("login")):this._render()}async _render(){if(!this.ownerDocument.defaultView)return;let t=s.u.createInstance(),e=await t.getList();200==e.status?this.shadowRoot.innerHTML=function(t){let e=' \n  <div>\n  <br>\n  <table border="1" bordercolor = "black" bgcolor = "CornflowerBlue">\n  <caption><b>Products</b></caption>\n  <tr>\n  <th>ID</th>\n  <th>Name</th>\n  <th>Price</th>\n  <th>Description</th>\n  <th>Delete</th>\n  </tr>          \n   ';return t.data.forEach((function(t){e+=`\n    <tr><td>${t.id}</td><td>${t.name}</td><td>${t.price}</td><td>${t.description}</td><td><button value=${t.id}><slot>Delete</slot></button></td></tr>          \n    `})),e+="\n  </table>\n  </div>\n  ",e}(e):(localStorage.removeItem("AutoSellUserToken"),o.RouterFactory.createInstance().go("login"));let n=2;e.data.forEach((function(t){n+=2}));for(let t=2;t<n;t+=2)this.shadowRoot.childNodes[1].childNodes[3].childNodes[3].childNodes[t].childNodes[4].childNodes[0].addEventListener("click",this._btn_delete_listener.bind(this,this.shadowRoot.childNodes[1].childNodes[3].childNodes[3].childNodes[t].childNodes[4].childNodes[0].value))}}customElements.define("x-table",a);class r extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this._render()}disconnectedCallback(){}static get observedAttributes(){return[]}attributeChangedCallback(t,e,n){}async _btn_add_listener(t){t.stopPropagation();let e=this.shadowRoot.childNodes[3].xValue,n=this.shadowRoot.childNodes[5].xValue,a=this.shadowRoot.childNodes[7].xValue,r=s.u.createInstance();r.setProduct(e,n,a);let i=await r.add();200==i.status?this._render():401==i.status?(localStorage.removeItem("AutoSellUserToken"),o.RouterFactory.createInstance().go("login")):this._render()}_btn_exit_listener(t){t.stopPropagation(),localStorage.removeItem("AutoSellUserToken"),o.RouterFactory.createInstance().go("login")}_render(){this.ownerDocument.defaultView&&(this.shadowRoot.innerHTML="\n    <x-button>Exit</x-button>\n    <x-input></x-input>\n    <x-input></x-input>\n    <x-input></x-input>\n    <x-button>Add</x-button>\n    <x-table></x-table>\n",this.shadowRoot.childNodes[1].addEventListener("click",this._btn_exit_listener.bind(this)),this.shadowRoot.childNodes[9].addEventListener("click",this._btn_add_listener.bind(this)))}}customElements.define("x-products_editor",r);class i extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this._render()}disconnectedCallback(){}static get observedAttributes(){return[]}attributeChangedCallback(t,e,n){}_render(){this.ownerDocument.defaultView&&(this.shadowRoot.innerHTML="      \n    <x-products_editor></x-products_editor>\n")}}customElements.define("x-main",i)}}]);